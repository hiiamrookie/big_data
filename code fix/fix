2013年9月4号
invoice_list.php
invoice_list.tpl
invoice_search.tpl
invoice_view.tpl
invoice_edit.tpl
================== 16:50

invoice_list.tpl
invoice/index.php
invoice_list.php

================== 17:34

2013年9月5号
invoice_search.php
invoice_search.tpl
invoice/index.php
invoice_normal_search.php
invoice_normal_search.tpl
==========================
收款部分：
ALTER TABLE `finance_receivables_list`
ADD COLUMN `payer`  varchar(50) NULL AFTER `isok`;


ALTER TABLE `finance_receivables`
ADD COLUMN `receivables_list`  int(11) NULL AFTER `pid`;

ALTER TABLE `finance_receivables_list`
ADD COLUMN `isexport`  tinyint(1) NULL DEFAULT 0 COMMENT '0：手动新建；1：文件导入' AFTER `payer`;

ALTER TABLE `finance_receivables`
ADD INDEX `index1` (`pid`) ;
================================
客户保额：
all view

ALTER TABLE `executive`
ADD INDEX `isalter` (`isalter`) USING BTREE ,
ADD INDEX `isok` (`isok`) ;

ALTER TABLE `executive`
ADD INDEX `index1` (`pid`, `amount`, `isalter`) ;

ALTER TABLE `finance_invoice`
ADD INDEX `index1` (`invoice_list_id`) ;

ALTER TABLE `finance_invoice_list`
ADD INDEX `index1` (`isok`, `print`, `step`) ;

ALTER TABLE `finance_invoice`
ADD INDEX `index2` (`pid`, `isok`) ;

ALTER TABLE `finance_receivables`
ADD INDEX `index2` (`receivables_list`) ,
ADD INDEX `index3` (`pid`, `isok`) ;

ALTER TABLE `customer_cusname`
ADD UNIQUE INDEX `index3` (`customer_id`, `cusname`) ;

ALTER TABLE `contract_cus`
ADD INDEX `index1` (`isok`) ;

customer_cusname
customer_safety

ALTER TABLE `customer_safety`
ADD COLUMN `tmpsafety`  double(255,2) NOT NULL DEFAULT 0 AFTER `safety`;

ALTER TABLE `customer_safety`
MODIFY COLUMN `tmpsafety`  double(255,2) NULL DEFAULT 0.00 AFTER `safety`,
ADD COLUMN `tmpsafety_deadline`  date NULL AFTER `tmpsafety`;

outsource_item	
outsource_content
outsource_cy

media_purchase*
------------------------------------------------
finance_receiveinvoice_source


11/19
ALTER TABLE `finance_invoice_list`
ADD COLUMN `remark`  text NULL AFTER `step`;


ALTER TABLE `finance_invoice_list`
ADD COLUMN `gduser`  int(11) NULL AFTER `remark`,
ADD INDEX `index2` (`gduser`) ;

ALTER TABLE `finance_invoice_list`
ADD COLUMN `gdtime`  int(9) NULL AFTER `gduser`;

//11/21
ALTER TABLE `finance_receiveinvoice_source`
ADD COLUMN `isok`  tinyint(1) NULL DEFAULT 1 COMMENT '1：正常；-1：撤销' AFTER `addtime`;


executive_cy

supplier

ALTER 
ALGORITHM=UNDEFINED 
DEFINER=`root`@`localhost` 
SQL SECURITY DEFINER 
VIEW `executive_for_finance` AS 
select `executive`.`id` AS `id`,`executive`.`pid` AS `pid`,`executive`.`amount` AS `amount`,`contract_cus`.`cusname` AS `cusname`,`executive`.`isalter` AS `isalter`,`executive`.`time` AS `time`,`executive`.`allcost` AS `allcost` from (`executive` join `contract_cus` on((`executive`.`cid` = `contract_cus`.`cid`))) where `executive`.`isok`<>-1 order by `executive`.`time` desc ;

views

//12-16
ALTER TABLE `executive`
ADD INDEX `oktime` (`oktime`) ;

ALTER TABLE `executive`
ADD INDEX `cid` (`cid`) ;

ALTER TABLE `executive`
ADD INDEX `city` (`city`) ,
ADD INDEX `dep` (`dep`) ;

//12-17
ALTER TABLE `executive_cy`
ADD INDEX `index1` (`payname`, `year`, `month`) ,
ADD INDEX `index2` (`pid`) ,
ADD INDEX `index3` (`paycost_id`) ;


ALTER TABLE `finance_invoice_list`
MODIFY COLUMN `pids`  varchar(5000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL AFTER `invoice_ids`;


//12-23
finance_deposit

//12/25
finance_deposit_invoice_list
finance_deposit_invoice

//12.30
finance_deposit_receivables
finance_deposit_receivables_list

//5.7
supplier
tec_project_*

//6.3
supplier_apply

//7.9
ALTER TABLE `executive_paycost`
ADD COLUMN `category`  varchar(100) NULL AFTER `time`,
ADD COLUMN `isagent2`  tinyint(1) NULL DEFAULT 0 COMMENT '0：非二级代理；1：二级代理' AFTER `category`;